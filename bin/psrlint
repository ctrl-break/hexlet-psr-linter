#!/usr/bin/env php
<?php

require_once __DIR__.'/../vendor/autoload.php';

use Commando\Command;
use HexletPsrLinter as hpl;

$cmd = new Command();

$cmd->option()
    ->aka('path')
    ->require()
    ->describedAs('File path');


$errors = 0;
$result = hpl\run($cmd['path']);

foreach ($result as $key => $item) {
    hpl\printResult($item, $key);
    if (!empty($item)) {
        ++$errors;
    }
}
//eval(\Psy\sh());
$exitCode = 0;
if ($errors) {
    $exitCode = 1;
}
exit($exitCode);
